{% extends 'base.html.twig' %}

{% block title %}Booking{% endblock %}

{% block body %}

{#    {{ dump(booking) }}#}

    <nav class="collection with-header blue-grey-text white">
        <div class="nav-wrapper">
            <ul id="nav-mobile" class="hide-on-med-and-down">
                <li>
                    <a href="#">
                        <i class="material-icons small grey-text">local_printshop</i>

                    </a>
                </li>
                <li>
                    <a href="#">
                        <i class="material-icons small grey-text">send</i>
                    </a>
                </li>
            </ul>
        </div>
    </nav>


    <ul class="collection with-header blue-grey-text">
        <li class="collection-header">
            Booking No.
            <h5 class="section-title blue-text">{{ booking.id }}
                <div class="right right-align right-aligned">
                    <a href="javascript:history.back()">
                        <i class="material-icons small grey-text">close</i>
                    </a>
                </div>
            </h5>
        </li>
        <li class="collection-item lighten-5 grey-text">
            {{ include('booking/_booking_body_small.html.twig') }}
        </li>
        <li class="collection-item lighten-5 grey-text">
            {{ include('guest/_booking_guest_body_small.html.twig') }}
        </li>

        <li class="collection-item lighten-5 grey-text">
            <div class="row">
                <span class="new badge left blue" data-badge-caption="Bill"></span>
            </div>
            <div class="row">
                <table class="highlight">
                    <thead>
                    <tr>
                        <th>Position</th>
                        <th>Amount</th>
                        <th>Price / EUR</th>
                    </tr>
                    </thead>

                    <tbody>
                    <tr class="black-text">
                        <td>
                                {{ booking.bookedroom.house }} / {{ booking.bookedroom.floor }} / {{ booking.bookedroom.name }}
                        </td>
                        <td>
                                {% set difference = date(booking.bookingtill).diff(date(booking.bookingfrom)) %}
                                {% set leftDays = difference.days %}

                                {% if leftDays == 1 %}
                                    1
                                {% else %}
                                    {{ leftDays }}
                                {% endif %}
                        </td>
                        <td>
                            {{ booking.prices.0.price | number_format(2, ',', '.') }}

                            {% set endSum = booking.prices.0.price * leftDays %}
                        </td>
                    </tr>



                    {% for damage in booking.damages %}
                        <tr class="black-text">
                            <td>{{ damage.damageart }}</td>
                            <td></td>
                            <td>{{ damage.price  | number_format(2, ',', '.') }}</td>
                        </tr>
                        {% set endSum = endSum + damage.price %}
                    {% endfor %}



                    {% for parking in booking.parkings %}
                        <tr class="black-text">
                            <td>{{ parking.carplate }}</td>
                            <td></td>
                            <td>{{ parking.price | number_format(2, ',', '.')}}</td>
                        </tr>
                        {% set endSum = endSum + parking.price %}
                    {% endfor %}


                    <tr class="black-text">
                        <td></td>
                        <td>SUM</td>
                        <td>{{endSum | number_format(2, ',', '.') }}</td>
                    </tr>
                    <tr class="black-text">
                        <td></td>
                        <td>TAX</td>
                        <td>
                            {{ ((endSum * 1.19) - endSum )  | number_format(2, ',', '.')  }}
                        </td>
                    </tr>
                    <tr class="black-text">
                        <td></td>
                        <td>TOTAL</td>
                        <td>
                            <b>
                                 {{ ((endSum * 1.19) - endSum + endSum ) | number_format(2, ',', '.') }}
                            </b>
                        </td>
                    </tr>


                    </tbody>
                </table>
            </div>
        </li>


        <li class="collection-item lighten-5 grey-text">
            <div class="row">
                <span class="new badge left blue" data-badge-caption="Print"></span>
            </div>
            <div class="row">
                <div class="col">
                    <label>
                        <input type="checkbox"/>
                        <span>AGBs drucken</span>
                    </label>
                </div>
                <div class="col">
                    <label>
                        <input type="checkbox"/>
                        <span>Aufnahmevertrag drucken</span>
                    </label>
                </div>
                <div class="col">
                    <label>
                        <input type="checkbox"/>
                        <span>Meldeschein drucken</span>
                    </label>
                </div>
                <div class="col">
                    <label>
                        <input type="checkbox"/>
                        <span>Inventarliste drucken</span>
                    </label>
                </div>
                <div class="col">
                    <label>
                        <input type="checkbox"/>
                        <span>Preisliste drucken</span>
                    </label>
                </div>
                <div class="col">
                    <label>
                        <input type="checkbox"/>
                        <span>Hausordnung drucken</span>
                    </label>
                </div>
            </div>

        </li>
    </ul>


    {#    {{ dump(booking) }}#}
    {#    {{ dump(booking.prices.0) }}#}
    {#    {{ dump(booking.payments.0) }}#}

    {#    checkout#}


{% endblock %}